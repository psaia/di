{"version":3,"file":"","sourceRoot":"","sources":["canvas.js","component.js","control-drawer.js","di.js","dom.js","grid.js","interactions.js","layer-drawer.js","lifecycle.js","line-lifecycle.js","line-tux.js","line.js","marquee-lifecycle.js","marquee.js","palettes.js","rect-lifecycle.js","rect-tux.js","rect.js","shape.js","state.js","toolbar-drawer.js","tux.js","types.js","util.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nexports.__esModule = true;\nvar dom = require(\"./dom\");\nvar util = require(\"./util\");\nvar grid_1 = require(\"./grid\");\nvar component_1 = require(\"./component\");\nvar Canvas = /** @class */ (function (_super) {\n    __extends(Canvas, _super);\n    function Canvas() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.width = 0;\n        _this.height = 0;\n        _this.pixelScale = 1;\n        _this.shapes = new Set();\n        _this.play = function (time) {\n            if (time === void 0) { time = 0; }\n            var e_1, _a;\n            requestAnimationFrame(_this.play);\n            _this.ctx.clearRect(0, 0, _this.width, _this.height);\n            _this.grid.render();\n            try {\n                for (var _b = __values(_this.shapes.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var s = _c.value;\n                    if (s.animating) {\n                        s.render();\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        };\n        return _this;\n    }\n    Canvas.prototype.addShape = function (shape) {\n        this.shapes.add(shape);\n    };\n    Canvas.prototype.removeShape = function (shape) {\n        this.shapes[\"delete\"](shape);\n    };\n    Canvas.prototype.onMouseDown = function (fn) {\n        this.mouseDownFn = fn;\n    };\n    Canvas.prototype.onMouseUp = function (fn) {\n        this.mouseUpFn = fn;\n    };\n    Canvas.prototype.onMouseMove = function (fn) {\n        this.mouseMoveFn = fn;\n    };\n    Canvas.prototype.onResize = function (fn) {\n        this.resizeFn = fn;\n    };\n    Canvas.prototype.listen = function (o, evt, fn) {\n        o.addEventListener(evt, fn, false);\n    };\n    Canvas.prototype.resize = function (container) {\n        var _a = dom.getDimensions(container), width = _a.width, height = _a.height;\n        this.width = width;\n        this.height = height;\n        this.grid.setSize(width, height);\n        this.canvas.setAttribute(\"width\", String(width * this.pixelScale));\n        this.canvas.setAttribute(\"height\", String(height * this.pixelScale));\n        this.canvas.width = width * this.pixelScale;\n        this.canvas.height = height * this.pixelScale;\n        this.canvas.style.width = Math.floor(width) + \"px\";\n        this.canvas.style.height = Math.floor(height) + \"px\";\n        if (this.pixelScale > 1) {\n            this.ctx.scale(this.pixelScale, this.pixelScale);\n            this.ctx.translate(0.5, 0.5);\n        }\n    };\n    Canvas.prototype.registerListeners = function (container) {\n        var _this = this;\n        this.listen(this.canvas, \"mousemove\", function (e) {\n            _this.grid.setCursor(util.pt(e.layerX, e.layerY));\n            if (_this.mouseMoveFn) {\n                _this.mouseMoveFn(e);\n            }\n        });\n        this.listen(this.canvas, \"mousedown\", function (e) {\n            if (_this.mouseDownFn) {\n                _this.mouseDownFn(e);\n            }\n        });\n        this.listen(this.canvas, \"mouseup\", function (e) {\n            if (_this.mouseUpFn) {\n                _this.mouseUpFn(e);\n            }\n        });\n        this.listen(window, \"resize\", function () {\n            _this.resize(container);\n            if (_this.resizeFn) {\n                _this.resizeFn();\n            }\n        });\n    };\n    Canvas.prototype.render = function () {\n        var container = dom.section(\"app\");\n        container.style.height = \"100%\";\n        container.style.width = \"100%\";\n        container.style.display = \"relative\";\n        container.style.overflow = \"hidden\";\n        container.style.background = this.colorPalette.stageBg;\n        this.canvas = dom.canvas();\n        this.ctx = this.canvas.getContext(\"2d\");\n        container.appendChild(this.canvas);\n        this.pixelScale = window.devicePixelRatio;\n        this.grid = new grid_1[\"default\"](this.ctx);\n        this.grid.setColor(this.colorPalette.gridColor);\n        this.registerListeners(container);\n        this.rendered(container);\n        this.play();\n        this.resize(container);\n    };\n    return Canvas;\n}(component_1[\"default\"]));\nexports[\"default\"] = Canvas;\n//# sourceMappingURL=canvas.js.map","\"use strict\";\nexports.__esModule = true;\nvar palettes = require(\"./palettes\");\nvar Component = /** @class */ (function () {\n    function Component() {\n        this.colorPalette = palettes.DEFAULT;\n    }\n    Component.prototype.onRender = function (fn) {\n        this.rendered = fn;\n    };\n    Component.prototype.setColorPalette = function (c) {\n        this.colorPalette = c;\n        this.render();\n    };\n    return Component;\n}());\nexports[\"default\"] = Component;\n//# sourceMappingURL=component.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar dom = require(\"./dom\");\nvar component_1 = require(\"./component\");\nvar ControlDrawer = /** @class */ (function (_super) {\n    __extends(ControlDrawer, _super);\n    function ControlDrawer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ControlDrawer.prototype.render = function () {\n        var section = dom.section(\"controldrawer\");\n        section.style.background = this.colorPalette.controldrawerBg;\n        section.style.color = this.colorPalette.controldrawerColor;\n        this.rendered(section);\n    };\n    return ControlDrawer;\n}(component_1[\"default\"]));\nexports[\"default\"] = ControlDrawer;\n//# sourceMappingURL=control-drawer.js.map","\"use strict\";\nexports.__esModule = true;\nvar dom = require(\"./dom\");\nvar control_drawer_1 = require(\"./control-drawer\");\nvar layer_drawer_1 = require(\"./layer-drawer\");\nvar toolbar_drawer_1 = require(\"./toolbar-drawer\");\nvar canvas_1 = require(\"./canvas\");\nvar interactions = require(\"./interactions\");\nfunction di(parentSelector) {\n    var parent = dom.select(parentSelector);\n    var controldrawer = new control_drawer_1[\"default\"]();\n    var toolbar = new toolbar_drawer_1[\"default\"]();\n    var layers = new layer_drawer_1[\"default\"]();\n    var canvas = new canvas_1[\"default\"]();\n    controldrawer.onRender(dom.renderer(parent));\n    layers.onRender(dom.renderer(parent));\n    toolbar.onRender(dom.renderer(parent));\n    canvas.onRender(dom.renderer(parent));\n    toolbar.render();\n    layers.render();\n    controldrawer.render();\n    canvas.render();\n    interactions.configure({\n        canvas: canvas,\n        toolbar: toolbar,\n        layers: layers,\n        controldrawer: controldrawer\n    });\n}\nwindow.di = di;\n//# sourceMappingURL=di.js.map","\"use strict\";\nexports.__esModule = true;\nvar prefix = \"di__\";\nfunction renderer(c) {\n    var lastNode = section(\"-\");\n    c.appendChild(lastNode);\n    return function (el) {\n        c.replaceChild(el, lastNode);\n        lastNode = el;\n    };\n}\nexports.renderer = renderer;\nfunction getDimensions(element, inject) {\n    if (inject === void 0) { inject = false; }\n    var dim;\n    if (inject) {\n        var clone = element.cloneNode(true);\n        clone.style.display = \"block\";\n        clone.style.visibility = \"hidden\";\n        document.body.appendChild(clone);\n        dim = clone.getBoundingClientRect();\n        document.body.removeChild(clone);\n    }\n    else {\n        dim = element.getBoundingClientRect();\n    }\n    return {\n        height: dim.height,\n        width: dim.width\n    };\n}\nexports.getDimensions = getDimensions;\nfunction select(selector) {\n    return document.querySelector(selector);\n}\nexports.select = select;\nfunction section(className) {\n    var s = document.createElement(\"section\");\n    s.className = prefix + className;\n    return s;\n}\nexports.section = section;\nfunction ul(className) {\n    if (className === void 0) { className = \"\"; }\n    var ul = document.createElement(\"ul\");\n    ul.className = prefix + className;\n    return ul;\n}\nexports.ul = ul;\nfunction li(className) {\n    if (className === void 0) { className = \"\"; }\n    var li = document.createElement(\"li\");\n    li.className = prefix + className;\n    return li;\n}\nexports.li = li;\nfunction button(className) {\n    if (className === void 0) { className = \"\"; }\n    var button = document.createElement(\"button\");\n    button.className = prefix + className;\n    return button;\n}\nexports.button = button;\nfunction a(className) {\n    if (className === void 0) { className = \"\"; }\n    var a = document.createElement(\"a\");\n    a.className = prefix + className;\n    return a;\n}\nexports.a = a;\nfunction canvas(className) {\n    if (className === void 0) { className = \"\"; }\n    var canvas = document.createElement(\"canvas\");\n    canvas.className = prefix + className;\n    return canvas;\n}\nexports.canvas = canvas;\n//# sourceMappingURL=dom.js.map","\"use strict\";\nexports.__esModule = true;\nvar util = require(\"./util\");\nvar Grid = /** @class */ (function () {\n    function Grid(ctx) {\n        this.density = 15;\n        this.gridActiveColor = \"white\";\n        this.gridColor = \"white\";\n        this.size = {\n            width: 100,\n            height: 100\n        };\n        this.ctx = ctx;\n        this.cursorPt = util.pt();\n    }\n    Grid.prototype.setSize = function (width, height) {\n        this.size = { width: width, height: height };\n        this.render();\n    };\n    Grid.prototype.setCursor = function (p) {\n        this.cursorPt = p;\n    };\n    Grid.prototype.setColor = function (c) {\n        this.gridColor = c;\n    };\n    Grid.prototype.drawCell = function (center) {\n        var size = 9;\n        // Here a bounds object is created to be used to determine if the mouse is\n        // within a certain cell. It is essentially the bounds of one cell.\n        var htSize = size;\n        var rightTop = util.pt(center[0] - htSize, center[1] + htSize);\n        var leftBottom = util.pt(center[0] + htSize, center[1] - htSize);\n        var bounds = [rightTop, leftBottom];\n        this.ctx.beginPath();\n        // |\n        this.ctx.moveTo(center[0], center[1] - size);\n        this.ctx.lineTo(center[0], center[1] + size);\n        // --\n        this.ctx.moveTo(center[0] - size, center[1]);\n        this.ctx.lineTo(center[0] + size, center[1]);\n        if (util.withinBound(this.cursorPt, bounds)) {\n            this.closestPt = center;\n            // this.ctx.strokeStyle = this.gridActiveColor;\n        }\n        else {\n            this.ctx.strokeStyle = this.gridColor;\n        }\n        this.ctx.setLineDash([0, 0]);\n        this.ctx.lineWidth = 1;\n        this.ctx.stroke();\n    };\n    Grid.prototype.render = function () {\n        var grid = [];\n        var w = this.size.width;\n        var h = this.size.height;\n        var padding = 25;\n        var margin = this.density;\n        for (var x = padding; x < w - padding; x += margin) {\n            for (var y = padding; y < h - padding; y += margin) {\n                var p = util.pt(x, y);\n                this.drawCell(p);\n                grid.push(p);\n            }\n        }\n        this.grid = grid;\n        return grid;\n    };\n    return Grid;\n}());\nexports[\"default\"] = Grid;\n//# sourceMappingURL=grid.js.map","\"use strict\";\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nexports.__esModule = true;\nvar state_1 = require(\"./state\");\nvar util = require(\"./util\");\nvar marquee_lifecycle_1 = require(\"./marquee-lifecycle\");\nvar rect_lifecycle_1 = require(\"./rect-lifecycle\");\nvar line_lifecycle_1 = require(\"./line-lifecycle\");\nvar types_1 = require(\"./types\");\nfunction configure(os) {\n    var state = new state_1[\"default\"]();\n    var op = new Operator(os, state);\n    op.dbind();\n    op.paint();\n}\nexports.configure = configure;\nvar Operator = /** @class */ (function () {\n    function Operator(os, state) {\n        this.state = state;\n        this.os = os;\n    }\n    /**\n     * Bind the canvas and toolbar elements in the OS to event listeners in the\n     * operator.\n     */\n    Operator.prototype.dbind = function () {\n        this.os.canvas.onMouseDown(this.handleMouseDown.bind(this));\n        this.os.canvas.onMouseUp(this.handleMouseUp.bind(this));\n        this.os.canvas.onMouseMove(this.handleMouseMove.bind(this));\n        document.addEventListener(\"keydown\", this.handleKeyDown.bind(this));\n        this.os.toolbar.onModeChange = this.handleChangeMode.bind(this);\n    };\n    /**\n     * Called to set/change the operating system with a different color scheme.\n     */\n    Operator.prototype.paint = function () {\n        for (var k in this.os) {\n            this.os[k].setColorPalette(this.state.colors);\n        }\n    };\n    /**\n     * Deselect all cycles.\n     */\n    Operator.prototype.deselectAll = function () {\n        var e_1, _a;\n        try {\n            for (var _b = __values(this.state.cycles.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var cycle = _c.value;\n                this.select(cycle, false);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /**\n     * Automatically select and make hot cycles out of cycles that the marquee\n     * selects.\n     */\n    Operator.prototype.selectWithinRect = function (rect) {\n        var e_2, _a;\n        try {\n            for (var _b = __values(this.state.cycles.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var cycle = _c.value;\n                if (util.intersect(rect, cycle.shape.pts)) {\n                    this.select(cycle, true);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    /**\n     * Convienence method to select or deselect a cycle. This will also make it\n     * hot or cold depending on if it's selected.\n     */\n    Operator.prototype.select = function (cycle, selected) {\n        if (selected === void 0) { selected = true; }\n        cycle.select(selected);\n        if (selected) {\n            this.state.hotCycles.add(cycle);\n        }\n        else {\n            this.state.hotCycles[\"delete\"](cycle);\n        }\n    };\n    /**\n     * Return all selected items on stage.\n     */\n    Operator.prototype.selected = function () {\n        var e_3, _a;\n        var s = new Set();\n        try {\n            for (var _b = __values(this.state.cycles.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var cycle = _c.value;\n                if (cycle.selected) {\n                    s.add(cycle);\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return s;\n    };\n    /**\n     * Delete a cycle from stage fully.\n     */\n    Operator.prototype.remove = function (cycle) {\n        this.state.hotCycles[\"delete\"](cycle);\n        this.state.cycles[\"delete\"](cycle);\n        cycle.remove(this.os.canvas);\n    };\n    /**\n     * Triggered when a mode changes from an external source. Likely, the toolbar.\n     */\n    Operator.prototype.handleChangeMode = function (m) {\n        this.state.mode = m;\n    };\n    /**\n     * When the mouse is pressed on the canvas.\n     */\n    Operator.prototype.handleMouseDown = function (e) {\n        var e_4, _a;\n        // Configure state based on this mousedown.\n        this.state.downAt = new Date().getTime();\n        this.state.pinnedCursorPoint = this.os.canvas.grid.closestPt;\n        this.state.cursorPoint = this.os.canvas.grid.closestPt;\n        this.state.anchorPosition = types_1.AnchorPosition.RightBottom;\n        try {\n            // Loop through each cycle to see if the user clicked on something on the\n            // stage.\n            for (var _b = __values(this.state.cycles.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var cycle = _c.value;\n                // Note that the cursorPt is passed and not the closestPt. This is so the\n                // most absolute position is accounted for.\n                var o = cycle.hitTest(this.os.canvas.grid.cursorPt);\n                if (o !== null) {\n                    this.state.anchorPosition = o.position;\n                    if (this.selected().size === 1) {\n                        this.deselectAll();\n                    }\n                    cycle.prevPts = cycle.shape.pts;\n                    this.select(cycle, true);\n                    return;\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        // Deselect all shapes before creating a new one or selecting others.\n        this.deselectAll();\n        // Move on to creating a new shape w/ mgmt lifecycle.\n        switch (this.state.mode) {\n            case types_1.Mode.Marquee: {\n                var cycle = new marquee_lifecycle_1[\"default\"](this.state);\n                cycle.start(this.os.canvas);\n                cycle.prevPts = [\n                    this.state.pinnedCursorPoint,\n                    this.state.pinnedCursorPoint\n                ];\n                this.state.cycles.add(cycle);\n                this.select(cycle, true);\n                break;\n            }\n            case types_1.Mode.Rectangle: {\n                var cycle = new rect_lifecycle_1[\"default\"](this.state);\n                cycle.prevPts = [\n                    this.state.pinnedCursorPoint,\n                    this.state.pinnedCursorPoint\n                ];\n                cycle.start(this.os.canvas);\n                this.state.cycles.add(cycle);\n                this.select(cycle, true);\n                break;\n            }\n            case types_1.Mode.Line: {\n                var cycle = new line_lifecycle_1[\"default\"](this.state);\n                cycle.prevPts = [\n                    this.state.pinnedCursorPoint,\n                    this.state.pinnedCursorPoint\n                ];\n                cycle.start(this.os.canvas);\n                this.state.cycles.add(cycle);\n                this.select(cycle, true);\n                break;\n            }\n        }\n    };\n    /**\n     * When the mouse is released:\n     *\n     * 1. Determine if any of the hotCycles are the marquee. If so:\n     *   1. Remove the marquee.\n     *   2. Deselect all.\n     *   3. Select cycles which intersect with the marquee.\n     * 2. Set mode to marquee.\n     * 3. Unset anchor position.\n     */\n    Operator.prototype.handleMouseUp = function (e) {\n        var e_5, _a;\n        if (this.state.hotCycles.size) {\n            try {\n                for (var _b = __values(this.state.hotCycles.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var cycle = _c.value;\n                    // A marquee gets removed as soon as the cursor is released, always. Then\n                    // selecty any shapes that the marquee overlapped.\n                    if (cycle instanceof marquee_lifecycle_1[\"default\"]) {\n                        var marqueePts = util.clone(cycle.shape.pts);\n                        this.remove(cycle);\n                        this.deselectAll();\n                        this.selectWithinRect(marqueePts);\n                    }\n                    else {\n                        cycle.prevPts = cycle.shape.pts;\n                        this.state.hotCycles[\"delete\"](cycle);\n                    }\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n        // Reset the mode to be marquee, always.\n        this.state.mode = types_1.Mode.Marquee;\n        this.state.anchorPosition = null;\n    };\n    /**\n     * When the mouse moves all hotCycles need to be mutated relative to the\n     * current state.\n     */\n    Operator.prototype.handleMouseMove = function (e) {\n        var e_6, _a, e_7, _b;\n        this.state.cursorPoint = this.os.canvas.grid.closestPt;\n        if (this.state.pinnedCursorPoint) {\n            var diffX = this.state.cursorPoint[0] - this.state.pinnedCursorPoint[0];\n            var diffY = this.state.cursorPoint[1] - this.state.pinnedCursorPoint[1];\n            // Only mutate what's hot unless we're moving things around. Then we can\n            // mutate all of the selected items at once.\n            if (this.state.anchorPosition === types_1.AnchorPosition.Center) {\n                try {\n                    for (var _c = __values(this.selected().values()), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var cycle = _d.value;\n                        cycle.mutate(diffX, diffY);\n                    }\n                }\n                catch (e_6_1) { e_6 = { error: e_6_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_a = _c[\"return\"])) _a.call(_c);\n                    }\n                    finally { if (e_6) throw e_6.error; }\n                }\n            }\n            else {\n                try {\n                    for (var _e = __values(this.state.hotCycles.values()), _f = _e.next(); !_f.done; _f = _e.next()) {\n                        var cycle = _f.value;\n                        cycle.mutate(diffX, diffY);\n                    }\n                }\n                catch (e_7_1) { e_7 = { error: e_7_1 }; }\n                finally {\n                    try {\n                        if (_f && !_f.done && (_b = _e[\"return\"])) _b.call(_e);\n                    }\n                    finally { if (e_7) throw e_7.error; }\n                }\n            }\n        }\n    };\n    /**\n     * Handle anytime a key is pressed.\n     */\n    Operator.prototype.handleKeyDown = function (e) {\n        var _a, e_8, _b, e_9, _c;\n        var direction = (_a = {},\n            _a[types_1.KeyEvent.ARROW_LEFT] = [-this.os.canvas.grid.density, 0],\n            _a[types_1.KeyEvent.ARROW_RIGHT] = [this.os.canvas.grid.density, 0],\n            _a[types_1.KeyEvent.ARROW_UP] = [0, -this.os.canvas.grid.density],\n            _a[types_1.KeyEvent.ARROW_DOWN] = [0, this.os.canvas.grid.density],\n            _a);\n        switch (e.keyCode) {\n            case types_1.KeyEvent.BACKSPACE: {\n                e.preventDefault();\n                try {\n                    for (var _d = __values(this.selected().values()), _e = _d.next(); !_e.done; _e = _d.next()) {\n                        var cycle = _e.value;\n                        this.remove(cycle);\n                    }\n                }\n                catch (e_8_1) { e_8 = { error: e_8_1 }; }\n                finally {\n                    try {\n                        if (_e && !_e.done && (_b = _d[\"return\"])) _b.call(_d);\n                    }\n                    finally { if (e_8) throw e_8.error; }\n                }\n                break;\n            }\n            case types_1.KeyEvent.ARROW_UP:\n            case types_1.KeyEvent.ARROW_DOWN:\n            case types_1.KeyEvent.ARROW_RIGHT:\n            case types_1.KeyEvent.ARROW_LEFT:\n                e.preventDefault();\n                this.state.anchorPosition = types_1.AnchorPosition.Center;\n                try {\n                    for (var _f = __values(this.selected().values()), _g = _f.next(); !_g.done; _g = _f.next()) {\n                        var cycle = _g.value;\n                        cycle.mutate(direction[e.keyCode][0], direction[e.keyCode][1]);\n                        cycle.prevPts = cycle.shape.pts;\n                    }\n                }\n                catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                finally {\n                    try {\n                        if (_g && !_g.done && (_c = _f[\"return\"])) _c.call(_f);\n                    }\n                    finally { if (e_9) throw e_9.error; }\n                }\n                this.state.anchorPosition = null;\n                break;\n        }\n    };\n    return Operator;\n}());\n//# sourceMappingURL=interactions.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar dom = require(\"./dom\");\nvar component_1 = require(\"./component\");\nvar types_1 = require(\"./types\");\nvar LayerDrawer = /** @class */ (function (_super) {\n    __extends(LayerDrawer, _super);\n    function LayerDrawer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.layers = [];\n        return _this;\n    }\n    LayerDrawer.prototype.addLayer = function (layer) {\n        this.layers.push(layer);\n        this.render();\n    };\n    LayerDrawer.prototype.getLayers = function () {\n        return this.layers;\n    };\n    LayerDrawer.prototype.render = function () {\n        var _a;\n        var section = dom.section(\"layers\");\n        var ul = dom.ul(\"layer-list\");\n        section.style.width = \"165px\";\n        section.style.background = this.colorPalette.layersBg;\n        section.style.color = this.colorPalette.layersColor;\n        var countHashMap = (_a = {},\n            _a[types_1.LayerType.Rect] = 0,\n            _a[types_1.LayerType.Line] = 0,\n            _a);\n        this.layers.forEach(function (l) {\n            var li = dom.li(\"layer-list-item\");\n            li.innerHTML = l.humanName + \" \" + ++countHashMap[l.type];\n            ul.appendChild(li);\n        });\n        section.appendChild(ul);\n        this.rendered(section);\n    };\n    return LayerDrawer;\n}(component_1[\"default\"]));\nexports[\"default\"] = LayerDrawer;\n//# sourceMappingURL=layer-drawer.js.map","\"use strict\";\nexports.__esModule = true;\nvar Lifecycle = /** @class */ (function () {\n    function Lifecycle(state) {\n        /**\n         * prevPts need to be updated anytime a series of mutations is complete. This\n         * needs to be handled manually since there's not way to automatically know\n         * when the mutation is totally complete.\n         */\n        this.prevPts = [];\n        /**\n         * Determine whether or not the object is selected.\n         */\n        this.selected = true;\n        this.state = state;\n    }\n    return Lifecycle;\n}());\nexports[\"default\"] = Lifecycle;\n//# sourceMappingURL=lifecycle.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar line_1 = require(\"./line\");\nvar lifecycle_1 = require(\"./lifecycle\");\nvar line_tux_1 = require(\"./line-tux\");\nvar util = require(\"./util\");\nvar types_1 = require(\"./types\");\nvar LineLifecycle = /** @class */ (function (_super) {\n    __extends(LineLifecycle, _super);\n    function LineLifecycle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LineLifecycle.prototype.hitTest = function (p) {\n        if (this.tux) {\n            return this.tux.checkAllHitTests(p);\n        }\n    };\n    LineLifecycle.prototype.start = function (c) {\n        this.shape = new line_1[\"default\"]();\n        this.shape.ctx = c.ctx;\n        this.tux = new line_tux_1[\"default\"]();\n        this.tux.ctx = c.ctx;\n        c.addShape(this.shape);\n        c.addShape(this.tux);\n    };\n    LineLifecycle.prototype.remove = function (c) {\n        c.removeShape(this.shape);\n        c.removeShape(this.tux);\n    };\n    LineLifecycle.prototype.select = function (selected) {\n        this.selected = selected;\n        if (selected) {\n            this.tux.play();\n        }\n        else {\n            this.tux.stop();\n        }\n    };\n    LineLifecycle.prototype.mutate = function (diffX, diffY) {\n        this.shape.colors = this.state.colors;\n        this.tux.colors = this.state.colors;\n        if (this.state.anchorPosition === types_1.AnchorPosition.RightMiddle) {\n            this.shape.pts = [\n                util.pt(this.prevPts[0][0], this.prevPts[0][1]),\n                util.pt(this.prevPts[1][0] + diffX, this.prevPts[1][1] + diffY)\n            ];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.LeftMiddle) {\n            this.shape.pts = [\n                util.pt(this.prevPts[0][0] + diffX, this.prevPts[0][1] + diffY),\n                util.pt(this.prevPts[1][0], this.prevPts[1][1])\n            ];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.Center) {\n            this.shape.pts = [\n                util.pt(this.prevPts[0][0] + diffX, this.prevPts[0][1] + diffY),\n                util.pt(this.prevPts[1][0] + diffX, this.prevPts[1][1] + diffY)\n            ];\n        }\n        else {\n            this.shape.pts = [this.state.pinnedCursorPoint, this.state.cursorPoint];\n        }\n        this.tux.pts = this.shape.pts;\n    };\n    return LineLifecycle;\n}(lifecycle_1[\"default\"]));\nexports[\"default\"] = LineLifecycle;\n//# sourceMappingURL=line-lifecycle.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar tux_1 = require(\"./tux\");\nvar util = require(\"./util\");\nvar types_1 = require(\"./types\");\nvar LineTux = /** @class */ (function (_super) {\n    __extends(LineTux, _super);\n    function LineTux() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LineTux.prototype.render = function () {\n        var _this = this;\n        if (this.pts.length < 2) {\n            return;\n        }\n        var centroid = util.centroid(this.pts);\n        this.hitTestChecks = [];\n        this.configureAnchor(types_1.AnchorPosition.LeftMiddle, this.anchorBounds(this.pts[0]));\n        this.configureAnchor(types_1.AnchorPosition.RightMiddle, this.anchorBounds(this.pts[1]));\n        // Lastly, setup a check for anywhere in the center of the shape.\n        this.hitTestChecks.push(function (p) {\n            if (util.withinBound(p, [_this.pts[0], _this.pts[1]])) {\n                return {\n                    position: types_1.AnchorPosition.Center,\n                    point: centroid\n                };\n            }\n        });\n    };\n    return LineTux;\n}(tux_1[\"default\"]));\nexports[\"default\"] = LineTux;\n//# sourceMappingURL=line-tux.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar shape_1 = require(\"./shape\");\nvar util = require(\"./util\");\n/**\n * A line follows a very particular algorithm. There are potentially 4 break\n * points for each line since there are no diaganal lines.\n */\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Line.prototype.render = function () {\n        if (this.pts.length < 2) {\n            return;\n        }\n        var from = this.pts[0];\n        var to = this.pts[1];\n        this.ctx.beginPath();\n        this.ctx.lineWidth = 2;\n        this.ctx.moveTo(from[0], from[1]);\n        var pt1 = util.pt(from[0] + (to[0] - from[0]) / 2, from[1]);\n        var pt2 = util.pt(pt1[0], to[1]);\n        // Starting half line.\n        this.ctx.lineTo(pt1[0], pt1[1]);\n        // Intersecting vertical line.\n        this.ctx.lineTo(pt2[0], pt2[1]);\n        // Final connecting  line.\n        this.ctx.lineTo(to[0], to[1]);\n        this.ctx.strokeStyle = this.colors.shapeColor;\n        this.ctx.stroke();\n    };\n    return Line;\n}(shape_1[\"default\"]));\nexports[\"default\"] = Line;\n//# sourceMappingURL=line.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar marquee_1 = require(\"./marquee\");\nvar lifecycle_1 = require(\"./lifecycle\");\nvar util = require(\"./util\");\nvar MarqueeLifecycle = /** @class */ (function (_super) {\n    __extends(MarqueeLifecycle, _super);\n    function MarqueeLifecycle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MarqueeLifecycle.prototype.hitTest = function (p) {\n        return null;\n    };\n    MarqueeLifecycle.prototype.start = function (c) {\n        this.shape = new marquee_1[\"default\"]();\n        this.shape.pts = [this.state.pinnedCursorPoint, this.state.cursorPoint];\n        this.shape.colors = this.state.colors;\n        this.shape.ctx = c.ctx;\n        this.prevPts = util.clone(this.shape.pts);\n        c.addShape(this.shape);\n    };\n    MarqueeLifecycle.prototype.remove = function (c) {\n        c.removeShape(this.shape);\n    };\n    MarqueeLifecycle.prototype.mutate = function (diffX, diffY) {\n        this.shape.pts = [this.state.pinnedCursorPoint, this.state.cursorPoint];\n    };\n    MarqueeLifecycle.prototype.select = function (selected) {\n        this.selected = selected;\n    };\n    return MarqueeLifecycle;\n}(lifecycle_1[\"default\"]));\nexports[\"default\"] = MarqueeLifecycle;\n//# sourceMappingURL=marquee-lifecycle.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar shape_1 = require(\"./shape\");\nvar Marquee = /** @class */ (function (_super) {\n    __extends(Marquee, _super);\n    function Marquee() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Marquee.prototype.render = function () {\n        if (!this.animating || this.pts.length < 2) {\n            return;\n        }\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.pts[0][0], this.pts[0][1]);\n        this.ctx.lineTo(this.pts[0][0], this.pts[1][1]);\n        this.ctx.lineTo(this.pts[1][0], this.pts[1][1]);\n        this.ctx.lineTo(this.pts[1][0], this.pts[0][1]);\n        this.ctx.setLineDash([5, 5]);\n        this.ctx.lineWidth = 1;\n        this.ctx.closePath();\n        this.ctx.strokeStyle = this.colors.shapeColor;\n        this.ctx.stroke();\n    };\n    return Marquee;\n}(shape_1[\"default\"]));\nexports[\"default\"] = Marquee;\n//# sourceMappingURL=marquee.js.map","\"use strict\";\nexports.__esModule = true;\n// Default palette based on: https://colorhunt.co/palette/2763\nexports.DARK = {\n    stageBg: \"#222831\",\n    stageColor: \"#ffffff\",\n    gridColor: \"#393E46\",\n    shapeColor: \"#ffffff\",\n    // The primary toolbar at the top.\n    toolbarBg: \"#393e46\",\n    toolbarColor: \"#FFFFFF\",\n    // The layer palette.\n    layersBg: \"#00ADB5\",\n    layersColor: \"#FFFFFF\",\n    // The far left drawer.\n    controldrawerBg: \"#EEEEEE\",\n    controldrawerColor: \"#222831\"\n};\nexports.DEFAULT = exports.DARK;\n//# sourceMappingURL=palettes.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar rect_1 = require(\"./rect\");\nvar lifecycle_1 = require(\"./lifecycle\");\nvar rect_tux_1 = require(\"./rect-tux\");\nvar util = require(\"./util\");\nvar types_1 = require(\"./types\");\nvar RectLifecycle = /** @class */ (function (_super) {\n    __extends(RectLifecycle, _super);\n    function RectLifecycle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.text = \"\";\n        return _this;\n    }\n    RectLifecycle.prototype.hitTest = function (p) {\n        if (this.tux) {\n            return this.tux.checkAllHitTests(p);\n        }\n    };\n    RectLifecycle.prototype.start = function (c) {\n        this.shape = new rect_1[\"default\"]();\n        this.shape.ctx = c.ctx;\n        this.tux = new rect_tux_1[\"default\"]();\n        this.tux.pts = this.shape.pts;\n        this.tux.ctx = c.ctx;\n        c.addShape(this.shape);\n        c.addShape(this.tux);\n    };\n    RectLifecycle.prototype.remove = function (c) {\n        c.removeShape(this.shape);\n        c.removeShape(this.tux);\n    };\n    RectLifecycle.prototype.select = function (selected) {\n        this.selected = selected;\n        if (selected) {\n            this.tux.play();\n        }\n        else {\n            this.tux.stop();\n        }\n    };\n    RectLifecycle.prototype.mutate = function (diffX, diffY) {\n        if (this.prevPts.length < 2) {\n            return;\n        }\n        this.shape.colors = this.state.colors;\n        this.tux.colors = this.state.colors;\n        this.shape.text = this.text;\n        if (this.state.anchorPosition === types_1.AnchorPosition.RightBottom) {\n            this.shape.pts = [this.prevPts[0], this.state.cursorPoint];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.RightMiddle) {\n            this.shape.pts = [\n                this.shape.pts[0],\n                util.pt(diffX + this.prevPts[1][0], this.shape.pts[1][1])\n            ];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.RightTop) {\n            this.shape.pts = [\n                util.pt(this.shape.pts[0][0], this.prevPts[0][1] + diffY),\n                util.pt(this.prevPts[1][0] + diffX, this.shape.pts[1][1])\n            ];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.BottomMiddle) {\n            this.shape.pts = [\n                this.shape.pts[0],\n                util.pt(this.shape.pts[1][0], this.prevPts[1][1] + diffY)\n            ];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.LeftBottom) {\n            this.shape.pts = [\n                util.pt(this.prevPts[0][0] + diffX, this.shape.pts[0][1]),\n                util.pt(this.shape.pts[1][0], this.prevPts[1][1] + diffY)\n            ];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.LeftMiddle) {\n            this.shape.pts = [\n                util.pt(this.prevPts[0][0] + diffX, this.shape.pts[0][1]),\n                util.pt(this.shape.pts[1][0], this.shape.pts[1][1])\n            ];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.LeftTop) {\n            this.shape.pts = [\n                util.pt(this.prevPts[0][0] + diffX, this.prevPts[0][1] + diffY),\n                util.pt(this.shape.pts[1][0], this.shape.pts[1][1])\n            ];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.TopMiddle) {\n            this.shape.pts = [\n                util.pt(this.shape.pts[0][0], this.prevPts[0][1] + diffY),\n                util.pt(this.shape.pts[1][0], this.shape.pts[1][1])\n            ];\n        }\n        else if (this.state.anchorPosition === types_1.AnchorPosition.Center) {\n            this.shape.pts = [\n                util.pt(this.prevPts[0][0] + diffX, this.prevPts[0][1] + diffY),\n                util.pt(this.prevPts[1][0] + diffX, this.prevPts[1][1] + diffY)\n            ];\n        }\n        if (this.tux && this.shape.pts.length) {\n            this.tux.pts = this.shape.pts;\n        }\n    };\n    return RectLifecycle;\n}(lifecycle_1[\"default\"]));\nexports[\"default\"] = RectLifecycle;\n//# sourceMappingURL=rect-lifecycle.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar tux_1 = require(\"./tux\");\nvar util = require(\"./util\");\nvar types_1 = require(\"./types\");\nvar RectTux = /** @class */ (function (_super) {\n    __extends(RectTux, _super);\n    function RectTux() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RectTux.prototype.render = function () {\n        var _this = this;\n        if (this.pts.length !== 2) {\n            return;\n        }\n        var centroid = util.centroid(this.pts);\n        this.hitTestChecks = [];\n        this.configureAnchor(types_1.AnchorPosition.LeftTop, this.anchorBounds(this.pts[0]));\n        this.configureAnchor(types_1.AnchorPosition.LeftMiddle, this.anchorBounds(util.pt(this.pts[0][0], centroid[1])));\n        this.configureAnchor(types_1.AnchorPosition.LeftBottom, this.anchorBounds(util.pt(this.pts[0][0], this.pts[0][1] + (this.pts[1][1] - this.pts[0][1]))));\n        this.configureAnchor(types_1.AnchorPosition.RightBottom, this.anchorBounds(this.pts[1]));\n        this.configureAnchor(types_1.AnchorPosition.RightMiddle, this.anchorBounds(util.pt(this.pts[1][0], centroid[1])));\n        this.configureAnchor(types_1.AnchorPosition.RightTop, this.anchorBounds(util.pt(this.pts[1][0], this.pts[1][1] - (this.pts[1][1] - this.pts[0][1]))));\n        this.configureAnchor(types_1.AnchorPosition.TopMiddle, this.anchorBounds(util.pt(centroid[0], this.pts[0][1])));\n        this.configureAnchor(types_1.AnchorPosition.BottomMiddle, this.anchorBounds(util.pt(centroid[0], this.pts[1][1])));\n        // Lastly, setup a check for anywhere in the center of the shape.\n        this.hitTestChecks.push(function (p) {\n            if (util.withinBound(p, [_this.pts[0], _this.pts[1]])) {\n                return {\n                    position: types_1.AnchorPosition.Center,\n                    point: centroid\n                };\n            }\n        });\n    };\n    return RectTux;\n}(tux_1[\"default\"]));\nexports[\"default\"] = RectTux;\n//# sourceMappingURL=rect-tux.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar shape_1 = require(\"./shape\");\nvar util_1 = require(\"./util\");\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.text = \"\";\n        return _this;\n    }\n    Rect.prototype.render = function () {\n        if (!this.animating || this.pts.length < 2) {\n            return;\n        }\n        this.ctx.beginPath();\n        this.ctx.setLineDash([]);\n        this.ctx.strokeStyle = this.colors.shapeColor;\n        this.ctx.lineWidth = 2;\n        this.ctx.moveTo(this.pts[0][0], this.pts[0][1]);\n        this.ctx.lineTo(this.pts[0][0], this.pts[1][1]);\n        this.ctx.lineTo(this.pts[1][0], this.pts[1][1]);\n        this.ctx.lineTo(this.pts[1][0], this.pts[0][1]);\n        if (this.text) {\n            var center = util_1.centroid([this.pts[0], this.pts[1]]);\n            this.ctx.fillText(this.text, center[0], center[1]);\n            this.ctx.textAlign = \"center\";\n            this.ctx.textBaseline = \"middle\";\n            this.ctx.font = \"14pt 'Helvetica Neue', Helvetica, Arial, sans-serif'\";\n        }\n        this.ctx.closePath();\n        this.ctx.stroke();\n    };\n    return Rect;\n}(shape_1[\"default\"]));\nexports[\"default\"] = Rect;\n//# sourceMappingURL=rect.js.map","\"use strict\";\nexports.__esModule = true;\n/**\n * All shapes on the stage must implement this class.\n */\nvar Shape = /** @class */ (function () {\n    function Shape() {\n        this.pts = [];\n        this.animating = true;\n    }\n    Shape.prototype.stop = function () {\n        this.animating = false;\n    };\n    Shape.prototype.play = function () {\n        this.animating = true;\n    };\n    return Shape;\n}());\nexports[\"default\"] = Shape;\n//# sourceMappingURL=shape.js.map","\"use strict\";\nexports.__esModule = true;\nvar types_1 = require(\"./types\");\nvar palettes = require(\"./palettes\");\n/**\n * This class is instantiated in the interactions module and is mutated as\n * needed. It effectively contains the entire state of the application at a\n * given moment from a data perspective.\n */\nvar State = /** @class */ (function () {\n    function State() {\n        // The current selected objects.\n        this.hotCycles = new Set();\n        // Mode represents the intended object to create. This is updated by the\n        // toolbar.\n        this.mode = types_1.Mode.Marquee;\n        // All cycles in runtime/stage.\n        this.cycles = new Set();\n        this.colors = palettes.DEFAULT;\n    }\n    return State;\n}());\nexports[\"default\"] = State;\n//# sourceMappingURL=state.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar dom = require(\"./dom\");\nvar component_1 = require(\"./component\");\nvar types_1 = require(\"./types\");\nvar ToolbarDrawer = /** @class */ (function (_super) {\n    __extends(ToolbarDrawer, _super);\n    function ToolbarDrawer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ToolbarDrawer.prototype.handleClickEvent = function (m) {\n        var _this = this;\n        return function () {\n            _this.mode = m;\n            _this.onModeChange(_this.mode);\n        };\n    };\n    ToolbarDrawer.prototype.render = function () {\n        var el = dom.section(\"toolbar\");\n        var marqueeButton = dom.button();\n        var rectButton = dom.button();\n        var lineButton = dom.button();\n        marqueeButton.innerHTML = \"marquee\";\n        rectButton.innerHTML = \"rect\";\n        lineButton.innerHTML = \"line\";\n        // marqueeButton.style.backgroundImage = `url(${icons.marqueeLight})`;\n        // rectButton.style.backgroundImage = `url(${icons.rectangleDark})`;\n        // lineButton.style.backgroundImage = `url(${icons.lineDark})`;\n        // textButton.style.backgroundImage = `url(${icons.textDark})`;\n        el.style.background = this.colorPalette.toolbarBg;\n        marqueeButton.addEventListener(\"click\", this.handleClickEvent(types_1.Mode.Marquee));\n        rectButton.addEventListener(\"click\", this.handleClickEvent(types_1.Mode.Rectangle));\n        lineButton.addEventListener(\"click\", this.handleClickEvent(types_1.Mode.Line));\n        el.appendChild(marqueeButton);\n        el.appendChild(rectButton);\n        el.appendChild(lineButton);\n        this.rendered(el);\n    };\n    return ToolbarDrawer;\n}(component_1[\"default\"]));\nexports[\"default\"] = ToolbarDrawer;\n// const icons = {\n//   textLight:\n//     \"iVBORw0KGgoAAAANSUhEUgAAABYAAAAeCAYAAAAo5+5WAAAABGdBTUEAALGPC/xhBQAAAMFJREFUSA1j/A8EDNQHDUzUNxNiIt0MlgXax48F/0PyWRUWeZCe6UhqGFiQOUD2J0ZGxk9oYgxo8fADh5pfyProFhTIllLEBgXFRCQTULyDJM6IxMbFPIgkcQKJjZsJDOM/oHCGgkLcKhEyQy+MR10Mj73RoBgNCngIwBmjqWIIBwV6ZQqqOAWB/uGD+wnCQK5BBIFq5JHlgZXrQ2Q+VjZQUye0piCW+oPNIJolN4ygANr+HYg/YHMFDrG/OMRpIwwAOl1jHCODvn8AAAAASUVORK5CYII=\",\n//   selectLight:\n//     \"iVBORw0KGgoAAAANSUhEUgAAACAAAAAeCAYAAABNChwpAAAABGdBTUEAALGPC/xhBQAAAlhJREFUSA29lk9IVFEUxt8kYUgltsiNDCW4SMiVBFELNxJCEAjZroW0Eheia/+s3Og2qDYRgYJuNdxNtIoW4qJooW5aaKGUEJSg9vx94716e86bO+/x3nzwec+95zvnOw7v3ZlCGIZvgyBYh4uFQuEra33BACPQ4jPBBLxVtykwa4UHMAo7TGfuw+C8ZNw3WT9GJ2GvYSZhPsPQeAAKv2AjLMIxWJ9hMLoE96Dw2P3I2ddnGIxeyh0suQO4Mbn8hqH5PbkDPZDXXeNKMZrsh6HpBhRGKpnGnaF3h/lX7nD2p/YHmJoJU7caZ+Y7p17DjEI9wMmGoeCmU3TbZ+bL08sOs0vsQm/bo4r1JD4Y5UxFQYJD+tyBJdNPyz6chddi25B8BoUt2BArrJKgrgMuQIsjgjewWKXsJIWoGf6FwgNvgSNAr2v9OXSv9nfsuxyZP6RgHgpzfnUQoLsMp+BvaPGJoKeW+nMaCvtMlz+sV88JnAPy/fCH0WtZh//dpo68tpAGDXAbCoNxVeRa4E+JwHc4BC/G6ROd00hPq/A+rpCc1XwjvhKnS3VOwy4o6DK5EW2iM6jXSngazWeyp/FauX0Yjkcbcj5nctJciOYz2dNYV6qg34ynYN8N7TXbe5rIOsBE7/UhFO7a/sQlHYAVe5bbisly2SoMX8iE+KHZ63ZLdsGkmRKTJ8ZQr1sT/GL2r9P0S1yDmftzzX4auqDaEjdLW4DZK/Nf22U6ba9Udbjet86sO7Dq9ZzKxFeE6aYZYtinzSWPub7t9EWTzV2fdEqM22F/0jqf/hhHAq5AGWttgQAAAABJRU5ErkJggg==\",\n//   rectLight:\n//     \"iVBORw0KGgoAAAANSUhEUgAAACgAAAAcCAYAAAATFf3WAAAABGdBTUEAALGPC/xhBQAAAJ1JREFUWAntl7ENgDAQAwlCgpoKwT4MwmLMwUBITAE8FSdKFySFUzlKLFv3aZKuWFWZa00pLXWZ3d5WzSurM/SBfQ7ZRWjPYBY8AunEw791vLY5MjfmFj9iF+S4FG2CCjV6TJA0FG2CCjV6TJA0FG2CCjV6TJA0FG2CCjV6TJA0FG2CCjV6+Ksb4le18zCDbr+ZLPiMe/xeyL0v/g3eJSUQX+Hu6UAAAAAASUVORK5CYII=\",\n//   lineLight:\n//     \"iVBORw0KGgoAAAANSUhEUgAAABoAAAAcCAYAAAB/E6/TAAAABGdBTUEAALGPC/xhBQAAAYRJREFUSA21lk8rRFEYh91JpNCQRIqUImWhLEiKZmMhKSmzsbGxYWHDxsLOUuyUL8AHYKksRikLNc2UUlKTkhCRv8fz6t46nWaaHPd96+mcc+99n9+9M90zE1QoljGmE/0sjMQeg7wFliADUe1VxpGELYlnGtIwBgmw68ReeM0JmYS36NZLjENecrcJ+XaJADksN1Ht9nitEQWwC8Xq/x+bfVckJCBXJGlTrnO/NLv3r/N1GnrgwWnMOGv/JU+xGj7JMWMDHIZrGTr8zVYnosVQespYL6cYa+AICtal/lNE8/AN59Bom1jXwYp9zGuOJA1fkIdmL0m5JsRT8AGX0Fbueq/ziMdBXsJrkE0z/kI8Ci9wA93xJ2BEPAhPcAd9WiH9yO/hEQa0QnqR38IzDGuFdCEvwCuktELakV/BO0xohbQiv4BPmNEKaUKeBdla5rRCksjPQGpBK6QWefTPZVkrJNrW5UnWtEKqkB9IArWhEiJS5Pu/EcZsqYWEQfK7sgOBZtAPqmfXRATkc3kAAAAASUVORK5CYII=\",\n//   textDark:\n//     \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAgCAYAAAAmG5mqAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbklEQVQ4je2UwQ2AIBAEF0MBdrKWoJVrCWwndoCB4EMBkT/zu2M3Fz5jvPfowYYsyRnA0ug5SadNQwjvWeTJBuCYsnWD4h9IxqUk837rvjAKo1BhFEahQvQSyfWP+ST1m+92q0vu/CJkyqqsAuACdNIeCAV1+NEAAAAASUVORK5CYII=\",\n//   lineDark:\n//     \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABcCAYAAACRILDuAAAACXBIWXMAABYlAAAWJQFJUiTwAAACrElEQVR4nO2c0XHbMBAF32Xyn3QQl+ASUkI6iEtIKSnB7sQlxB3YHdgVXIYJNaINigBJUAfcvZ3BD0jZM7smKEGWRFVB7PhE97YwgDEMYAwDGMMAxjCAMQxgDAMYwwDGMIAxDGAMA1RARH6IyL2IvK79aZ+TGVLEIB3AaXwZH/PEAAdyQfqUx2QmAwNkKJA+hQFqsFL6lD/JTAYGGNkh/cSLqj4nsxlCB6ggfcrq5QcRA1SWPmX18oOgV8Ag/mcyu59NV0DIN+WHF02VI7yp6tdktoCQr4RV9Q7AQ3JgO5uWH0TeiqgcYdPyg+h7QRUjbA7Af8yqcE9QVUkmC+Fu6P4rYfUG3BQGGBkjvCQH8mxefsAAZ8Zl6FtyIA8D7GXnPWDzU1AwwKL8kuVo0wbclNABFuQ/qOpNwY151/KDyAEy8ocbcsmzo13LD8ZfEm4AGOTrzLifc7Fw/u3c+WsG5Z/HrPyFx73OnccAC2NG4mksyr8Q4XHunLUjzD2gZM3P8eGesPsGjChvyNSQf2I4X+Tf1k+VAO4342rKPwLXS1Dr8uE5QA/y4TVAL/LhMUBP8uEtQG/y4SlAj/LhJUCv8uEhQM/y0XuA3uWj5wAe5KPXAF7ko8cAnuSjtwDe5KOnAB7lo5cAXuWjhwCe5aP1AN7lo+UAEeSj1QBR5KPFAJHko7UA0eSjpQAR5aOVAFHlo4UAkeXDOkB0+bAMQPn/MQlA+WeuHoDy33PVAJSfcrUAlD/PVQJQ/mUOD0D5yxwagPLzHBaA8ss4JADll1M9AOWvo2oAEflN+euofQUMf/1vH+Yof4GqAVR1+PKK75MIlJ/hkM8Ji8gtgDtV/ZUcJO9def+gduuE/8YsaxjAGAYwhgGMYQBjGMAYBjCGAYxhAGMYwBgGMIYBLAHwF4/RU4hJQEIfAAAAAElFTkSuQmCC\",\n//   rectangleDark:\n//     \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAiCAYAAAAge+tMAAAABGdBTUEAALGPC/xhBQAAAIZJREFUWAnt2LENgGAIhFExzsP+c7CQJpZUV1xQks9Ocz+SBzZGZt7Hwutc2PPbMo1PT+7qL6yq6M/+cN+/RVZleiqIIy4KsCoilC2GuI1SLIS4CGWLIW6jFAshLkLZYojbKMVCiItQthjiNkqxEOIilC2GuI1SLBT9D5F47vMYqzI9grXiDy7JB1eT5yRbAAAAAElFTkSuQmCC\",\n//   marqueeDark:\n//     \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAiCAYAAAAge+tMAAAABGdBTUEAALGPC/xhBQAAAKpJREFUWAntl0EOgCAQA8HwHv7/Dj6k4dAEe+JAYKv1sgoEdodaQq613ml4Wmt5+ExR+68xSaX3opRszxUKkCWeUQHIs8bRfjpynrLEZTTOSpAlflq6/1v/dUpGLv87rsKV8N8bdRdkXcU+HlVSzmsVAfv4KpKz8xT7+CyqRePs44tAepqwBOzju7fGPr6dOC+Ik5RvQmjH+N39WBdR9gZ0dXJMD1VFjrLEH/xAUETson4YAAAAAElFTkSuQmCC\"\n// };\n//# sourceMappingURL=toolbar-drawer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar shape_1 = require(\"./shape\");\nvar util = require(\"./util\");\nvar Tux = /** @class */ (function (_super) {\n    __extends(Tux, _super);\n    function Tux() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hitTestChecks = [];\n        return _this;\n    }\n    /**\n     * Check all the hit tests to see if the given point is within anything.\n     */\n    Tux.prototype.checkAllHitTests = function (p) {\n        for (var i = 0, l = this.hitTestChecks.length; i < l; i++) {\n            var result = this.hitTestChecks[i](p);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    };\n    Tux.prototype.anchorBounds = function (p) {\n        var margin = 5;\n        var bottomLeft = util.pt(p[0] - margin, p[1] + margin);\n        var bottomRight = util.pt(p[0] + margin, p[1] + margin);\n        var topLeft = util.pt(p[0] - margin, p[1] - margin);\n        var topRight = util.pt(p[0] + margin, p[1] - margin);\n        return { topLeft: topLeft, topRight: topRight, bottomRight: bottomRight, bottomLeft: bottomLeft };\n    };\n    Tux.prototype.configureAnchor = function (position, bounds) {\n        this.ctx.beginPath();\n        this.ctx.setLineDash([]);\n        this.ctx.lineWidth = 1;\n        this.ctx.moveTo(bounds.topLeft[0], bounds.topLeft[1]);\n        this.ctx.lineTo(bounds.topRight[0], bounds.topRight[1]);\n        this.ctx.lineTo(bounds.bottomRight[0], bounds.bottomRight[1]);\n        this.ctx.lineTo(bounds.bottomLeft[0], bounds.bottomLeft[1]);\n        this.ctx.strokeStyle = this.colors.shapeColor;\n        this.ctx.fillStyle = this.colors.shapeColor;\n        this.ctx.fill();\n        this.ctx.closePath();\n        this.hitTestChecks.push(function (p) {\n            if (util.withinBound(p, [bounds.topLeft, bounds.bottomRight])) {\n                return {\n                    position: position,\n                    point: util.centroid([bounds.topLeft, bounds.bottomRight])\n                };\n            }\n        });\n    };\n    Tux.prototype.render = function () { };\n    return Tux;\n}(shape_1[\"default\"]));\nexports[\"default\"] = Tux;\n//# sourceMappingURL=tux.js.map","\"use strict\";\nexports.__esModule = true;\nvar ActionType;\n(function (ActionType) {\n    ActionType[ActionType[\"Moving\"] = 0] = \"Moving\";\n    ActionType[ActionType[\"Resizing\"] = 1] = \"Resizing\";\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\nvar AnchorPosition;\n(function (AnchorPosition) {\n    AnchorPosition[AnchorPosition[\"LeftTop\"] = 0] = \"LeftTop\";\n    AnchorPosition[AnchorPosition[\"LeftMiddle\"] = 1] = \"LeftMiddle\";\n    AnchorPosition[AnchorPosition[\"LeftBottom\"] = 2] = \"LeftBottom\";\n    AnchorPosition[AnchorPosition[\"Center\"] = 3] = \"Center\";\n    AnchorPosition[AnchorPosition[\"RightTop\"] = 4] = \"RightTop\";\n    AnchorPosition[AnchorPosition[\"RightMiddle\"] = 5] = \"RightMiddle\";\n    AnchorPosition[AnchorPosition[\"RightBottom\"] = 6] = \"RightBottom\";\n    AnchorPosition[AnchorPosition[\"BottomMiddle\"] = 7] = \"BottomMiddle\";\n    AnchorPosition[AnchorPosition[\"TopMiddle\"] = 8] = \"TopMiddle\";\n})(AnchorPosition = exports.AnchorPosition || (exports.AnchorPosition = {}));\nvar LayerType;\n(function (LayerType) {\n    LayerType[LayerType[\"Rect\"] = 0] = \"Rect\";\n    LayerType[LayerType[\"Line\"] = 1] = \"Line\";\n})(LayerType = exports.LayerType || (exports.LayerType = {}));\nvar Mode;\n(function (Mode) {\n    Mode[Mode[\"Marquee\"] = 0] = \"Marquee\";\n    Mode[Mode[\"Rectangle\"] = 1] = \"Rectangle\";\n    Mode[Mode[\"Line\"] = 2] = \"Line\";\n})(Mode = exports.Mode || (exports.Mode = {}));\nvar KeyEvent;\n(function (KeyEvent) {\n    KeyEvent[KeyEvent[\"BACKSPACE\"] = 8] = \"BACKSPACE\";\n    KeyEvent[KeyEvent[\"ARROW_LEFT\"] = 37] = \"ARROW_LEFT\";\n    KeyEvent[KeyEvent[\"ARROW_RIGHT\"] = 39] = \"ARROW_RIGHT\";\n    KeyEvent[KeyEvent[\"ARROW_UP\"] = 38] = \"ARROW_UP\";\n    KeyEvent[KeyEvent[\"ARROW_DOWN\"] = 40] = \"ARROW_DOWN\";\n})(KeyEvent = exports.KeyEvent || (exports.KeyEvent = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nexports.__esModule = true;\nfunction pt(x, y) {\n    if (x === undefined || y === undefined) {\n        return new Float32Array([0, 0]);\n    }\n    return new Float32Array([x, y]);\n}\nexports.pt = pt;\nfunction within(p, a, b) {\n    return p >= Math.min(a, b) && p <= Math.max(a, b);\n}\nexports.within = within;\n/**\n * Determine if a point is within the bounds of a rect.\n */\nfunction withinBound(pt, rect) {\n    if (!within(pt[0], rect[0][0], rect[1][0]) ||\n        !within(pt[1], rect[0][1], rect[1][1])) {\n        return false;\n    }\n    return true;\n}\nexports.withinBound = withinBound;\n/**\n * Determine if a rect overlaps another rect.\n */\nfunction intersect(rect1, rect2) {\n    var l1 = Math.min(rect1[0][0], rect1[1][0]);\n    var r1 = Math.max(rect1[0][0], rect1[1][0]);\n    var t1 = Math.min(rect1[0][1], rect1[1][1]);\n    var b1 = Math.max(rect1[0][1], rect1[1][1]);\n    var l2 = Math.min(rect2[0][0], rect2[1][0]);\n    var r2 = Math.max(rect2[0][0], rect2[1][0]);\n    var t2 = Math.min(rect2[0][1], rect2[1][1]);\n    var b2 = Math.max(rect2[0][1], rect2[1][1]);\n    return !(l2 > r1 || r2 < l1 || t2 > b1 || b2 < t1);\n}\nexports.intersect = intersect;\n/**\n * Obtain the center of two vectors in 2d space.\n * @params pts contains top left and bottom right.\n */\nfunction centroid(pts) {\n    return pt(pts[0][0] + (pts[1][0] - pts[0][0]) / 2, pts[0][1] + (pts[1][1] - pts[0][1]) / 2);\n}\nexports.centroid = centroid;\nfunction add(a, b) {\n    if (b instanceof Array) {\n        return b.map(function (v) { return pt(v[0] + a[0], v[1] + a[1]); });\n    }\n    else if (b instanceof Float32Array) {\n        return pt(a[0] + b[0], a[1] + b[1]);\n    }\n}\nexports.add = add;\nfunction subtract(a, b) {\n    if (b instanceof Array) {\n        return b.map(function (v) { return pt(v[0] - a[0], v[1] - a[1]); });\n    }\n    else if (b instanceof Float32Array) {\n        return pt(a[0] - b[0], a[1] - b[1]);\n    }\n}\nexports.subtract = subtract;\nfunction clone(a) {\n    return a.map(function (v) { return pt(v[0], v[1]); });\n}\nexports.clone = clone;\nfunction multiply(a, b) {\n    return b.map(function (v) { return pt(v[0] * a[0], v[1] * a[1]); });\n}\nexports.multiply = multiply;\nfunction dot() {\n    var pts = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        pts[_i] = arguments[_i];\n    }\n    var init = new Float32Array([0, 0]);\n    return pts.reduce(function (acc, p) { return multiply(acc, p); }, init);\n}\nexports.dot = dot;\n//# sourceMappingURL=util.js.map"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;"}